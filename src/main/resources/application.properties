# ===== Application Basics ======
spring.application.name=studio
server.port=80

# ===== AI Configuration =====
ai.output.dir=src/main/resources/static/generated
python.script.path=src/main/resources/python/generate_clothing.py
python.vtonscript.path=src/main/resources/python/virtual_tryon.py
ai.vtonoutput.dir=src/main/resources/static/vton
python.outfitscript.path=src/main/resources/python/outfit_suggestion.py
python.shirtrecommend.script=src/main/resources/python/shirt_recommender.py
python.camvirtualtryon.script=src/main/resources/python/cam_virtual_tryon_service.py
python.scripts.remove-background=src/main/resources/python/remove_background.py
python.script.matchPro=src/main/resources/python/match_products.py

# ===== File Storage =====
file.upload.temp-dir=src/main/resources/static/temp-uploads
upload.directory=src/main/resources/static/uploads/cloth-images
file.upload-dir=static/uploads/
file.generated-dir=static/generated/

# ===== Profile Configuration =====
#spring.profiles.active=dev
spring.profiles.active=prod

# ===== Database Configuration =====
spring.datasource.url=jdbc:postgresql://ubc-fashion-studio-ai-database-server.postgres.database.azure.com:5432/fashiondb?sslmode=require
spring.datasource.username=pgdbuser
spring.datasource.password=fashionStudioUBC@2025
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection pool settings
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=5000
spring.datasource.hikari.pool-name=StudioHikariPool

# ===== JPA/Hibernate Configuration =====
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.open-in-view=false

# SQL initialization
#spring.sql.init.mode=always
#spring.jpa.defer-datasource-initialization=true

# ===== Comprehensive Logging Configuration =====
# Application logs
logging.level.root=INFO
logging.level.io.metaverse.fashion.studio=DEBUG

# Spring framework logs
logging.level.org.springframework=INFO
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.transaction=DEBUG
logging.level.org.springframework.orm.jpa=DEBUG
logging.level.org.springframework.jdbc.core=TRACE
logging.level.org.springframework.jdbc.datasource=DEBUG

# Database and Hibernate logs
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.hibernate.stat=DEBUG
logging.level.org.hibernate.engine.transaction.internal.TransactionImpl=DEBUG
logging.level.org.hibernate.engine.jdbc.spi.SqlExceptionHelper=DEBUG

# JDBC connection logs
logging.level.org.postgresql=DEBUG
logging.level.org.postgresql.jdbc=DEBUG
logging.level.org.postgresql.core=DEBUG

# Connection pool logs
logging.level.com.zaxxer.hikari=DEBUG
logging.level.com.zaxxer.hikari.pool.HikariPool=DEBUG

# Transaction logs
logging.level.org.springframework.orm.jpa.JpaTransactionManager=DEBUG
logging.level.org.springframework.transaction.interceptor=DEBUG

# Request/Response logging
logging.level.org.springframework.web.filter.CommonsRequestLoggingFilter=DEBUG
logging.level.org.springframework.web.servlet.DispatcherServlet=DEBUG
logging.level.org.springframework.web.servlet.mvc.method.annotation=DEBUG

# ===== Actuator Endpoints (for production monitoring) =====
management.endpoints.web.exposure.include=health,info,metrics,env,beans,configprops
management.endpoint.health.show-details=always
management.endpoint.beans.enabled=true
management.endpoint.env.enabled=true
management.endpoint.metrics.enabled=true

# ===== Additional Performance Monitoring =====
spring.jpa.properties.hibernate.generate_statistics=true
spring.datasource.hikari.register-mbeans=true

# ===== Request/Response Logging =====
server.tomcat.accesslog.enabled=true
server.tomcat.accesslog.directory=logs
server.tomcat.accesslog.prefix=access_log
server.tomcat.accesslog.suffix=.log
server.tomcat.accesslog.pattern=%t "%r" %s (%D ms) %b %{User-Agent}i

# ===== Console Logging Pattern for Azure =====
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
